package io.rxmicro.examples.validation.client.all.types;

import io.reactivex.rxjava3.core.Completable;
import io.reactivex.rxjava3.core.Single;
import io.rxmicro.examples.validation.client.all.types.model.$$RequestConstraintValidator;
import io.rxmicro.examples.validation.client.all.types.model.$$RequestModelToJsonConverter;
import io.rxmicro.examples.validation.client.all.types.model.$$ResponseConstraintValidator;
import io.rxmicro.examples.validation.client.all.types.model.$$ResponseModelReader;
import io.rxmicro.examples.validation.client.all.types.model.Request;
import io.rxmicro.examples.validation.client.all.types.model.Response;
import io.rxmicro.http.error.ValidationException;
import io.rxmicro.rest.client.RestClientConfig;
import io.rxmicro.rest.client.detail.AbstractRestClient;
import io.rxmicro.rest.client.detail.HttpClient;
import io.rxmicro.rest.client.detail.HttpResponse;
import reactor.core.publisher.Mono;

import java.util.concurrent.CompletableFuture;

import static io.rxmicro.rest.client.detail.ErrorResponseCheckerHelper.throwExceptionIfNotSuccess;
import static io.rxmicro.validation.detail.RequestValidators.validateRequest;
import static io.rxmicro.validation.detail.ResponseValidators.validateIfResponseExists;
import static io.rxmicro.validation.detail.ResponseValidators.validateResponse;

/**
 * Generated by {@code RxMicro Annotation Processor}
 */
public final class $$RESTClient2 extends AbstractRestClient implements RESTClient2 {

    private final $$RequestModelToJsonConverter requestModelToJsonConverter =
            new $$RequestModelToJsonConverter();

    private final $$VirtualREST2Request2ModelToJsonConverter virtualREST2Request2ModelToJsonConverter =
            new $$VirtualREST2Request2ModelToJsonConverter();

    private final $$VirtualREST2Request3ModelToJsonConverter virtualREST2Request3ModelToJsonConverter =
            new $$VirtualREST2Request3ModelToJsonConverter();

    private final $$VirtualREST2Request5ModelToJsonConverter virtualREST2Request5ModelToJsonConverter =
            new $$VirtualREST2Request5ModelToJsonConverter();

    private final $$ResponseModelReader responseModelReader =
            new $$ResponseModelReader();

    private final $$VirtualREST2Request4ModelToJsonConverter virtualREST2Request4ModelToJsonConverter =
            new $$VirtualREST2Request4ModelToJsonConverter();

    private final $$VirtualREST2Request6ModelToJsonConverter virtualREST2Request6ModelToJsonConverter =
            new $$VirtualREST2Request6ModelToJsonConverter();

    private final $$VirtualREST2RequestModelToJsonConverter virtualREST2RequestModelToJsonConverter =
            new $$VirtualREST2RequestModelToJsonConverter();

    private final $$VirtualREST2Request6ConstraintValidator virtualREST2Request6ConstraintValidator =
            new $$VirtualREST2Request6ConstraintValidator();

    private final $$VirtualREST2Request5ConstraintValidator virtualREST2Request5ConstraintValidator =
            new $$VirtualREST2Request5ConstraintValidator();

    private final $$VirtualREST2Request4ConstraintValidator virtualREST2Request4ConstraintValidator =
            new $$VirtualREST2Request4ConstraintValidator();

    private final $$VirtualREST2Request3ConstraintValidator virtualREST2Request3ConstraintValidator =
            new $$VirtualREST2Request3ConstraintValidator();

    private final $$VirtualREST2RequestConstraintValidator virtualREST2RequestConstraintValidator =
            new $$VirtualREST2RequestConstraintValidator();

    private final $$VirtualREST2Request2ConstraintValidator virtualREST2Request2ConstraintValidator =
            new $$VirtualREST2Request2ConstraintValidator();

    private final $$RequestConstraintValidator requestConstraintValidator =
            new $$RequestConstraintValidator();

    private final $$ResponseConstraintValidator responseConstraintValidator =
            new $$ResponseConstraintValidator();

    private final HttpClient client;

    private final RestClientConfig config;

    public $$RESTClient2(final HttpClient client,
                         final RestClientConfig config) {
        this.client = client;
        this.config = config;
    }

    @Override
    public CompletableFuture<Void> put1(final String email) {
        final $$VirtualREST2Request virtualRequest = new $$VirtualREST2Request(email);
        try {
            validateRequest(config.isEnableAdditionalValidations(), virtualREST2RequestConstraintValidator, virtualRequest);
        } catch (final ValidationException e) {
            return CompletableFuture.failedFuture(e);
        }
        final String path = "/put1";
        final Object body = virtualREST2RequestModelToJsonConverter.toJson(virtualRequest);
        final CompletableFuture<HttpResponse> response = client
                .sendAsync("PUT", path, EMPTY_HEADERS, body)
                .handle(throwExceptionIfNotSuccess());
        return response
                .thenApply(resp -> null);
    }

    @Override
    public CompletableFuture<Void> put2(final Request request) {
        try {
            validateRequest(config.isEnableAdditionalValidations(), requestConstraintValidator, request);
        } catch (final ValidationException e) {
            return CompletableFuture.failedFuture(e);
        }
        final String path = "/put2";
        final Object body = requestModelToJsonConverter.toJson(request);
        final CompletableFuture<HttpResponse> response = client
                .sendAsync("PUT", path, EMPTY_HEADERS, body)
                .handle(throwExceptionIfNotSuccess());
        return response
                .thenApply(resp -> null);
    }

    @Override
    public CompletableFuture<Void> put2() {
        final CompletableFuture<HttpResponse> response = client
                .sendAsync("PUT", "/put3", EMPTY_HEADERS)
                .handle(throwExceptionIfNotSuccess());
        return response
                .thenApply(resp -> null);
    }

    @Override
    public CompletableFuture<Response> put4(final String email) {
        final $$VirtualREST2Request2 virtualRequest = new $$VirtualREST2Request2(email);
        try {
            validateRequest(config.isEnableAdditionalValidations(), virtualREST2Request2ConstraintValidator, virtualRequest);
        } catch (final ValidationException e) {
            return CompletableFuture.failedFuture(e);
        }
        final String path = "/put4";
        final Object body = virtualREST2Request2ModelToJsonConverter.toJson(virtualRequest);
        final CompletableFuture<HttpResponse> response = client
                .sendAsync("PUT", path, EMPTY_HEADERS, body)
                .handle(throwExceptionIfNotSuccess());
        return response
                .thenApply(resp -> responseModelReader.readSingle(resp))
                .whenComplete((resp, th) -> validateIfResponseExists(responseConstraintValidator, resp));
    }

    @Override
    public CompletableFuture<Response> put5(final Request request) {
        try {
            validateRequest(config.isEnableAdditionalValidations(), requestConstraintValidator, request);
        } catch (final ValidationException e) {
            return CompletableFuture.failedFuture(e);
        }
        final String path = "/put5";
        final Object body = requestModelToJsonConverter.toJson(request);
        final CompletableFuture<HttpResponse> response = client
                .sendAsync("PUT", path, EMPTY_HEADERS, body)
                .handle(throwExceptionIfNotSuccess());
        return response
                .thenApply(resp -> responseModelReader.readSingle(resp))
                .whenComplete((resp, th) -> validateIfResponseExists(responseConstraintValidator, resp));
    }

    @Override
    public CompletableFuture<Response> put6() {
        final CompletableFuture<HttpResponse> response = client
                .sendAsync("PUT", "/put6", EMPTY_HEADERS)
                .handle(throwExceptionIfNotSuccess());
        return response
                .thenApply(resp -> responseModelReader.readSingle(resp))
                .whenComplete((resp, th) -> validateIfResponseExists(responseConstraintValidator, resp));
    }

    @Override
    public Mono<Void> put7(final String email) {
        final $$VirtualREST2Request3 virtualRequest = new $$VirtualREST2Request3(email);
        try {
            validateRequest(config.isEnableAdditionalValidations(), virtualREST2Request3ConstraintValidator, virtualRequest);
        } catch (final ValidationException e) {
            return Mono.error(e);
        }
        final String path = "/put7";
        final Object body = virtualREST2Request3ModelToJsonConverter.toJson(virtualRequest);
        final CompletableFuture<HttpResponse> response = client
                .sendAsync("PUT", path, EMPTY_HEADERS, body)
                .handle(throwExceptionIfNotSuccess());
        return Mono.fromFuture(response)
                .then();
    }

    @Override
    public Mono<Void> put8(final Request request) {
        try {
            validateRequest(config.isEnableAdditionalValidations(), requestConstraintValidator, request);
        } catch (final ValidationException e) {
            return Mono.error(e);
        }
        final String path = "/put8";
        final Object body = requestModelToJsonConverter.toJson(request);
        final CompletableFuture<HttpResponse> response = client
                .sendAsync("PUT", path, EMPTY_HEADERS, body)
                .handle(throwExceptionIfNotSuccess());
        return Mono.fromFuture(response)
                .then();
    }

    @Override
    public Mono<Void> put9() {
        final CompletableFuture<HttpResponse> response = client
                .sendAsync("PUT", "/put9", EMPTY_HEADERS)
                .handle(throwExceptionIfNotSuccess());
        return Mono.fromFuture(response)
                .then();
    }

    @Override
    public Mono<Response> put10(final String email) {
        final $$VirtualREST2Request4 virtualRequest = new $$VirtualREST2Request4(email);
        try {
            validateRequest(config.isEnableAdditionalValidations(), virtualREST2Request4ConstraintValidator, virtualRequest);
        } catch (final ValidationException e) {
            return Mono.error(e);
        }
        final String path = "/put10";
        final Object body = virtualREST2Request4ModelToJsonConverter.toJson(virtualRequest);
        final CompletableFuture<HttpResponse> response = client
                .sendAsync("PUT", path, EMPTY_HEADERS, body)
                .handle(throwExceptionIfNotSuccess());
        return Mono.fromFuture(response)
                .map(resp -> responseModelReader.readSingle(resp))
                .doOnSuccess(resp -> validateResponse(responseConstraintValidator, resp));
    }

    @Override
    public Mono<Response> put11(final Request request) {
        try {
            validateRequest(config.isEnableAdditionalValidations(), requestConstraintValidator, request);
        } catch (final ValidationException e) {
            return Mono.error(e);
        }
        final String path = "/put11";
        final Object body = requestModelToJsonConverter.toJson(request);
        final CompletableFuture<HttpResponse> response = client
                .sendAsync("PUT", path, EMPTY_HEADERS, body)
                .handle(throwExceptionIfNotSuccess());
        return Mono.fromFuture(response)
                .map(resp -> responseModelReader.readSingle(resp))
                .doOnSuccess(resp -> validateResponse(responseConstraintValidator, resp));
    }

    @Override
    public Mono<Response> put12() {
        final CompletableFuture<HttpResponse> response = client
                .sendAsync("PUT", "/put12", EMPTY_HEADERS)
                .handle(throwExceptionIfNotSuccess());
        return Mono.fromFuture(response)
                .map(resp -> responseModelReader.readSingle(resp))
                .doOnSuccess(resp -> validateResponse(responseConstraintValidator, resp));
    }

    @Override
    public Completable put13(final String email) {
        final $$VirtualREST2Request5 virtualRequest = new $$VirtualREST2Request5(email);
        try {
            validateRequest(config.isEnableAdditionalValidations(), virtualREST2Request5ConstraintValidator, virtualRequest);
        } catch (final ValidationException e) {
            return Completable.error(e);
        }
        final String path = "/put13";
        final Object body = virtualREST2Request5ModelToJsonConverter.toJson(virtualRequest);
        final CompletableFuture<HttpResponse> response = client
                .sendAsync("PUT", path, EMPTY_HEADERS, body)
                .handle(throwExceptionIfNotSuccess());
        return Completable.fromCompletionStage(response);
    }

    @Override
    public Completable put14(final Request request) {
        try {
            validateRequest(config.isEnableAdditionalValidations(), requestConstraintValidator, request);
        } catch (final ValidationException e) {
            return Completable.error(e);
        }
        final String path = "/put14";
        final Object body = requestModelToJsonConverter.toJson(request);
        final CompletableFuture<HttpResponse> response = client
                .sendAsync("PUT", path, EMPTY_HEADERS, body)
                .handle(throwExceptionIfNotSuccess());
        return Completable.fromCompletionStage(response);
    }

    @Override
    public Completable put15() {
        final CompletableFuture<HttpResponse> response = client
                .sendAsync("PUT", "/put15", EMPTY_HEADERS)
                .handle(throwExceptionIfNotSuccess());
        return Completable.fromCompletionStage(response);
    }

    @Override
    public Single<Response> put16(final String email) {
        final $$VirtualREST2Request6 virtualRequest = new $$VirtualREST2Request6(email);
        try {
            validateRequest(config.isEnableAdditionalValidations(), virtualREST2Request6ConstraintValidator, virtualRequest);
        } catch (final ValidationException e) {
            return Single.error(e);
        }
        final String path = "/put16";
        final Object body = virtualREST2Request6ModelToJsonConverter.toJson(virtualRequest);
        final CompletableFuture<HttpResponse> response = client
                .sendAsync("PUT", path, EMPTY_HEADERS, body)
                .handle(throwExceptionIfNotSuccess());
        return Single.fromCompletionStage(response)
                .map(resp -> responseModelReader.readSingle(resp))
                .doOnSuccess(resp -> validateResponse(responseConstraintValidator, resp));
    }

    @Override
    public Single<Response> put17(final Request request) {
        try {
            validateRequest(config.isEnableAdditionalValidations(), requestConstraintValidator, request);
        } catch (final ValidationException e) {
            return Single.error(e);
        }
        final String path = "/put17";
        final Object body = requestModelToJsonConverter.toJson(request);
        final CompletableFuture<HttpResponse> response = client
                .sendAsync("PUT", path, EMPTY_HEADERS, body)
                .handle(throwExceptionIfNotSuccess());
        return Single.fromCompletionStage(response)
                .map(resp -> responseModelReader.readSingle(resp))
                .doOnSuccess(resp -> validateResponse(responseConstraintValidator, resp));
    }

    @Override
    public Single<Response> put18() {
        final CompletableFuture<HttpResponse> response = client
                .sendAsync("PUT", "/put18", EMPTY_HEADERS)
                .handle(throwExceptionIfNotSuccess());
        return Single.fromCompletionStage(response)
                .map(resp -> responseModelReader.readSingle(resp))
                .doOnSuccess(resp -> validateResponse(responseConstraintValidator, resp));
    }
}
