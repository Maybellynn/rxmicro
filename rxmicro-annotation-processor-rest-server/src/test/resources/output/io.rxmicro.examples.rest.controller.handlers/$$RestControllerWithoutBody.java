package io.rxmicro.examples.rest.controller.handlers;

import io.rxmicro.http.HttpHeaders;
import io.rxmicro.rest.model.PathVariableMapping;
import io.rxmicro.rest.server.detail.component.AbstractRestController;
import io.rxmicro.rest.server.detail.component.RestControllerRegistrar;
import io.rxmicro.rest.server.detail.model.HttpRequest;
import io.rxmicro.rest.server.detail.model.HttpResponse;
import io.rxmicro.rest.server.detail.model.Registration;
import io.rxmicro.rest.server.detail.model.mapping.ExactUrlRequestMappingRule;

import java.util.concurrent.CompletableFuture;
import java.util.concurrent.CompletionStage;

/**
 * Generated by rxmicro annotation processor
 */
public final class $$RestControllerWithoutBody extends AbstractRestController {

    private RestControllerWithoutBody restController;

    private $$VirtualWithoutBodyRequestModelReader virtualWithoutBodyRequestModelReader;

    private $$VirtualWithoutBodyRequest4ModelReader virtualWithoutBodyRequest4ModelReader;

    private $$VirtualWithoutBodyRequest5ModelReader virtualWithoutBodyRequest5ModelReader;

    private $$VirtualWithoutBodyRequest2ModelReader virtualWithoutBodyRequest2ModelReader;

    private $$VirtualWithoutBodyRequest3ModelReader virtualWithoutBodyRequest3ModelReader;

    private $$RequestModelReader requestModelReader;

    private HttpResponse mono1NotFoundResponse;

    private HttpResponse mono2NotFoundResponse;

    private HttpResponse mono4NotFoundResponse;

    @Override
    protected void postConstruct() {
        restController = new RestControllerWithoutBody();
        virtualWithoutBodyRequestModelReader = new $$VirtualWithoutBodyRequestModelReader();
        virtualWithoutBodyRequest4ModelReader = new $$VirtualWithoutBodyRequest4ModelReader();
        virtualWithoutBodyRequest5ModelReader = new $$VirtualWithoutBodyRequest5ModelReader();
        virtualWithoutBodyRequest2ModelReader = new $$VirtualWithoutBodyRequest2ModelReader();
        virtualWithoutBodyRequest3ModelReader = new $$VirtualWithoutBodyRequest3ModelReader();
        requestModelReader = new $$RequestModelReader();
        mono1NotFoundResponse = notFound("Not Found");
        mono2NotFoundResponse = notFound("Not Found");
        mono4NotFoundResponse = notFound("Not Found");
    }

    @Override
    public Class<?> getRestControllerClass() {
        return RestControllerWithoutBody.class;
    }

    @Override
    public void register(final RestControllerRegistrar registrar) {
        registrar.register(
                this,
                new Registration(
                        "/",
                        "void1()",
                        this::void1,
                        false,
                        new ExactUrlRequestMappingRule(
                                "GET",
                                "/void/void1",
                                false
                        )
                ),
                new Registration(
                        "/",
                        "void2(io.rxmicro.examples.rest.controller.handlers.Request)",
                        this::void2,
                        false,
                        new ExactUrlRequestMappingRule(
                                "GET",
                                "/void/void2",
                                false
                        )
                ),
                new Registration(
                        "/",
                        "void3(java.lang.String)",
                        this::void3,
                        false,
                        new ExactUrlRequestMappingRule(
                                "GET",
                                "/void/void3",
                                false
                        )
                ),
                new Registration(
                        "/",
                        "completedFuture1()",
                        this::completedFuture1,
                        false,
                        new ExactUrlRequestMappingRule(
                                "GET",
                                "/jse/completedFuture1",
                                false
                        )
                ),
                new Registration(
                        "/",
                        "completedFuture1(io.rxmicro.examples.rest.controller.handlers.Request)",
                        this::completedFuture1Request,
                        false,
                        new ExactUrlRequestMappingRule(
                                "GET",
                                "/jse/completedFuture2",
                                false
                        )
                ),
                new Registration(
                        "/",
                        "completedFuture1(java.lang.String)",
                        this::completedFuture1String,
                        false,
                        new ExactUrlRequestMappingRule(
                                "GET",
                                "/jse/completedFuture3",
                                false
                        )
                ),
                new Registration(
                        "/",
                        "completionStage1()",
                        this::completionStage1,
                        false,
                        new ExactUrlRequestMappingRule(
                                "GET",
                                "/jse/completionStage1",
                                false
                        )
                ),
                new Registration(
                        "/",
                        "completionStage2(io.rxmicro.examples.rest.controller.handlers.Request)",
                        this::completionStage2,
                        false,
                        new ExactUrlRequestMappingRule(
                                "GET",
                                "/jse/completionStage2",
                                false
                        )
                ),
                new Registration(
                        "/",
                        "completionStage3(java.lang.String)",
                        this::completionStage3,
                        false,
                        new ExactUrlRequestMappingRule(
                                "GET",
                                "/jse/completionStage3",
                                false
                        )
                ),
                new Registration(
                        "/",
                        "mono1()",
                        this::mono1,
                        false,
                        new ExactUrlRequestMappingRule(
                                "GET",
                                "/spring-reactor/mono1",
                                false
                        )
                ),
                new Registration(
                        "/",
                        "mono2(java.lang.String)",
                        this::mono2,
                        false,
                        new ExactUrlRequestMappingRule(
                                "GET",
                                "/spring-reactor/mono2",
                                false
                        )
                ),
                new Registration(
                        "/",
                        "mono4(io.rxmicro.examples.rest.controller.handlers.Request)",
                        this::mono4,
                        false,
                        new ExactUrlRequestMappingRule(
                                "GET",
                                "/spring-reactor/mono3",
                                false
                        )
                ),
                new Registration(
                        "/",
                        "completable1()",
                        this::completable1,
                        false,
                        new ExactUrlRequestMappingRule(
                                "GET",
                                "/rxjava3/completable1",
                                false
                        )
                ),
                new Registration(
                        "/",
                        "completable2(io.rxmicro.examples.rest.controller.handlers.Request)",
                        this::completable2,
                        false,
                        new ExactUrlRequestMappingRule(
                                "GET",
                                "/rxjava3/completable2",
                                false
                        )
                ),
                new Registration(
                        "/",
                        "completable3(java.lang.String)",
                        this::completable3,
                        false,
                        new ExactUrlRequestMappingRule(
                                "GET",
                                "/rxjava3/completable3",
                                false
                        )
                )
        );
    }

    private CompletionStage<HttpResponse> void1(final PathVariableMapping pathVariableMapping,
                                                final HttpRequest request) {
        final HttpHeaders headers = HttpHeaders.of();
        restController.void1();
        return CompletableFuture.completedStage(buildResponse(200, headers));
    }

    private CompletionStage<HttpResponse> void2(final PathVariableMapping pathVariableMapping,
                                                final HttpRequest request) {
        final Request req = requestModelReader.read(pathVariableMapping, request, request.isContentPresent());
        final HttpHeaders headers = HttpHeaders.of();
        restController.void2(req);
        return CompletableFuture.completedStage(buildResponse(200, headers));
    }

    private CompletionStage<HttpResponse> void3(final PathVariableMapping pathVariableMapping,
                                                final HttpRequest request) {
        final $$VirtualWithoutBodyRequest req = virtualWithoutBodyRequestModelReader.read(pathVariableMapping, request, request.isContentPresent());
        final HttpHeaders headers = HttpHeaders.of();
        restController.void3(req.requestParameter);
        return CompletableFuture.completedStage(buildResponse(200, headers));
    }

    private CompletionStage<HttpResponse> completedFuture1(final PathVariableMapping pathVariableMapping,
                                                           final HttpRequest request) {
        final HttpHeaders headers = HttpHeaders.of();
        return restController.completedFuture1()
                .thenApply(nothing -> buildResponse(200, headers));
    }

    private CompletionStage<HttpResponse> completedFuture1Request(final PathVariableMapping pathVariableMapping,
                                                                  final HttpRequest request) {
        final Request req = requestModelReader.read(pathVariableMapping, request, request.isContentPresent());
        final HttpHeaders headers = HttpHeaders.of();
        return restController.completedFuture1(req)
                .thenApply(nothing -> buildResponse(200, headers));
    }

    private CompletionStage<HttpResponse> completedFuture1String(final PathVariableMapping pathVariableMapping,
                                                                 final HttpRequest request) {
        final $$VirtualWithoutBodyRequest2 req = virtualWithoutBodyRequest2ModelReader.read(pathVariableMapping, request, request.isContentPresent());
        final HttpHeaders headers = HttpHeaders.of();
        return restController.completedFuture1(req.requestParameter)
                .thenApply(nothing -> buildResponse(200, headers));
    }

    private CompletionStage<HttpResponse> completionStage1(final PathVariableMapping pathVariableMapping,
                                                           final HttpRequest request) {
        final HttpHeaders headers = HttpHeaders.of();
        return restController.completionStage1()
                .thenApply(nothing -> buildResponse(200, headers));
    }

    private CompletionStage<HttpResponse> completionStage2(final PathVariableMapping pathVariableMapping,
                                                           final HttpRequest request) {
        final Request req = requestModelReader.read(pathVariableMapping, request, request.isContentPresent());
        final HttpHeaders headers = HttpHeaders.of();
        return restController.completionStage2(req)
                .thenApply(nothing -> buildResponse(200, headers));
    }

    private CompletionStage<HttpResponse> completionStage3(final PathVariableMapping pathVariableMapping,
                                                           final HttpRequest request) {
        final $$VirtualWithoutBodyRequest3 req = virtualWithoutBodyRequest3ModelReader.read(pathVariableMapping, request, request.isContentPresent());
        final HttpHeaders headers = HttpHeaders.of();
        return restController.completionStage3(req.requestParameter)
                .thenApply(nothing -> buildResponse(200, headers));
    }

    private CompletionStage<HttpResponse> mono1(final PathVariableMapping pathVariableMapping,
                                                final HttpRequest request) {
        final HttpHeaders headers = HttpHeaders.of();
        return restController.mono1()
                .toFuture()
                .thenApply(nothing -> buildResponse(200, headers));
    }

    private CompletionStage<HttpResponse> mono2(final PathVariableMapping pathVariableMapping,
                                                final HttpRequest request) {
        final $$VirtualWithoutBodyRequest4 req = virtualWithoutBodyRequest4ModelReader.read(pathVariableMapping, request, request.isContentPresent());
        final HttpHeaders headers = HttpHeaders.of();
        return restController.mono2(req.requestParameter)
                .toFuture()
                .thenApply(nothing -> buildResponse(200, headers));
    }

    private CompletionStage<HttpResponse> mono4(final PathVariableMapping pathVariableMapping,
                                                final HttpRequest request) {
        final Request req = requestModelReader.read(pathVariableMapping, request, request.isContentPresent());
        final HttpHeaders headers = HttpHeaders.of();
        return restController.mono4(req)
                .toFuture()
                .thenApply(nothing -> buildResponse(200, headers));
    }

    private CompletionStage<HttpResponse> completable1(final PathVariableMapping pathVariableMapping,
                                                       final HttpRequest request) {
        final HttpHeaders headers = HttpHeaders.of();
        return restController.completable1()
                .toCompletionStage(buildResponse(200, headers));
    }

    private CompletionStage<HttpResponse> completable2(final PathVariableMapping pathVariableMapping,
                                                       final HttpRequest request) {
        final Request req = requestModelReader.read(pathVariableMapping, request, request.isContentPresent());
        final HttpHeaders headers = HttpHeaders.of();
        return restController.completable2(req)
                .toCompletionStage(buildResponse(200, headers));
    }

    private CompletionStage<HttpResponse> completable3(final PathVariableMapping pathVariableMapping,
                                                       final HttpRequest request) {
        final $$VirtualWithoutBodyRequest5 req = virtualWithoutBodyRequest5ModelReader.read(pathVariableMapping, request, request.isContentPresent());
        final HttpHeaders headers = HttpHeaders.of();
        return restController.completable3(req.requestParameter)
                .toCompletionStage(buildResponse(200, headers));
    }

    private HttpResponse buildResponse(final int statusCode,
                                       final HttpHeaders headers) {
        final HttpResponse response = httpResponseBuilder.build();
        response.setStatus(statusCode);
        response.setOrAddHeaders(headers);
        return response;
    }
}
