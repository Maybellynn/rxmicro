package io.rxmicro.examples.data.r2dbc.postgresql.transactional.model;

import io.r2dbc.spi.Row;
import io.rxmicro.data.sql.r2dbc.detail.EntityToR2DBCSQLDBConverter;

import java.time.Instant;

import static io.rxmicro.common.util.Requires.require;

/**
 * Generated by {@code RxMicro Annotation Processor}
 */
public final class $$OrderEntityToR2DBCSQLDBConverter extends EntityToR2DBCSQLDBConverter<Order, Row> {

    private static final Class<?>[] INSERT_PARAM_TYPES = {
            Long.class,
            Integer.class,
            Integer.class
    };

    private static final Class<?>[] UPDATE_PARAM_TYPES = {
            Long.class,
            Integer.class,
            Integer.class,
            Instant.class
    };

    public Class<?>[] getInsertParamTypes() {
        return INSERT_PARAM_TYPES;
    }

    public Object[] getInsertParams(final Order entity) {
        return new Object[]{
                entity.idAccount,
                entity.idProduct,
                entity.count
        };
    }

    public Class<?>[] getUpdateParamTypes() {
        return UPDATE_PARAM_TYPES;
    }

    public Object[] getUpdateParams(final Order entity) {
        return new Object[]{
                entity.idAccount,
                entity.idProduct,
                entity.count,
                entity.created,
                // primary key(s):
                require(entity.id, "Primary key must be not null!")
        };
    }

    public Object getPrimaryKey(final Order entity) {
        return require(entity.id, "Primary key must be not null!");
    }
}
